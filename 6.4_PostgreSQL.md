# 6.4. PostgreSQL
======

# Задание №1

- Используя docker поднимите инстанс PostgreSQL (версию 13). Данные БД сохраните в volume.
- Подключитесь к БД PostgreSQL используя psql.
- Воспользуйтесь командой \? для вывода подсказки по имеющимся в psql управляющим командам.
- Найдите и приведите управляющие команды для:

   - вывода списка БД
   - подключения к БД

![Снимок экрана от 2022-07-03 10-17-27](https://user-images.githubusercontent.com/93032289/177029466-4a086701-fceb-40ff-a1eb-1076d0963064.png)

   - вывода списка таблиц

![Снимок экрана от 2022-07-03 10-21-28](https://user-images.githubusercontent.com/93032289/177030090-316d0965-e017-4486-b920-1cd75f2b2c8d.png)

   - вывода описания содержимого таблиц

![Снимок экрана от 2022-07-03 10-22-30](https://user-images.githubusercontent.com/93032289/177030092-b4ffbacd-fe97-4f46-a3fc-57ee174a2a68.png)

   - выхода из psql
```
postgres=# \q
root@fdc4164b197a:/# 

```

# Задание №2

- Используя psql создайте БД test_database.

![Снимок экрана от 2022-07-03 10-42-18](https://user-images.githubusercontent.com/93032289/177030728-eda3d1d5-501c-4571-95e6-9694d96993ba.png)

- Изучите бэкап БД.
- Восстановите бэкап БД в test_database.

![Снимок экрана от 2022-07-03 10-51-55](https://user-images.githubusercontent.com/93032289/177030729-ecd898a5-c61c-4a89-a492-9ddca378f8b7.png)

- Перейдите в управляющую консоль psql внутри контейнера.
- Подключитесь к восстановленной БД и проведите операцию ANALYZE для сбора статистики по таблице.

![Снимок экрана от 2022-07-03 11-08-14](https://user-images.githubusercontent.com/93032289/177031084-79ae4859-7983-4652-b830-f2dca9f532fd.png)

- Используя таблицу pg_stats, найдите столбец таблицы orders с наибольшим средним значением размера элементов в байтах.
- Приведите в ответе команду, которую вы использовали для вычисления и полученный результат.

![Снимок экрана от 2022-07-03 11-08-37](https://user-images.githubusercontent.com/93032289/177031085-8164274e-6e33-4c22-add3-2f92cc67f0f0.png)

# Задание №3

Архитектор и администратор БД выяснили, что ваша таблица orders разрослась до невиданных размеров и поиск по ней занимает долгое время. Вам, как успешному выпускнику курсов DevOps в нетологии предложили провести разбиение таблицы на 2 (шардировать на orders_1 - price>499 и orders_2 - price<=499).

Предложите SQL-транзакцию для проведения данной операции.
